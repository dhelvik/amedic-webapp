<!DOCTYPE html>
<html lang="en">
<% include head.ejs%>
<style type="text/css">
    .colorChange {
        color:red;
    }
</style>

<body>
<div class="container">
    <% include adminNav.ejs%>
    <form id="registerUserForm">
        <div class="form-group">
            <label for="inputName">Name <span class="colorChange">*</span> </label>
            <input class="form-control" name="name" id="inputName" placeholder="Name" required>
        </div>
        <div class="form-group">
            <label for="inputUsername">Username <span class="colorChange">*</span></label>
            <input class="form-control" name="loginID" id="inputUsername"  placeholder="Username" required>
        </div>
        <div class="form-group">
            <label for="inputPassword">Password <span class="colorChange">*</span></label>
            <input type="password" name="password" class="form-control" id="inputPassword" placeholder="*********" required>
        </div>
        <div class="form-group">
            <label for="inputPassword">Password again <span class="colorChange">*</span></label>
            <input type="password" name="passwordAgain" class="form-control" id="inputPasswordAgain" placeholder="*********" required>
        </div>
        

        <div class="form-group">
            <label for="role">Role</label>
            <select id="role" name="role"><option>Sysadmin</option>
            <option>HE</option>
            <option>HSA</option></select>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

</div>
<script>

        $('#registerUserForm').submit(function(e){
            e.preventDefault();
            if($('#inputPassword').val() === $('#inputPasswordAgain').val()){
            $.ajax({
                method:'post',
                url:'/users/register',
                data: $('#registerUserForm').serialize(),
                dataType:'json',
                success: function(result){
                   if(result.status=200){
                       alert('success');
                       $("#registerUserForm")[0].reset();
                   }else {
                       alert(result.error);
                   }

                },
                error: function(xhr, status, error){
                    alert(status.message);
                }
            });
            } else {
                alert("Passwords doesn't match");
            }
        });

</script>
</body>
</html>